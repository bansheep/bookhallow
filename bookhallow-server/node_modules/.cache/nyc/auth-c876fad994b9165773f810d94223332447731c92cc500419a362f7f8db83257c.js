function cov_2e3fehcp8e(){var path="C:\\Users\\Owner\\Desktop\\bookhallow\\bookhallow-server\\middleware\\auth.js";var hash="1364efccd46646f718adc12484760c9abf969a44";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Owner\\Desktop\\bookhallow\\bookhallow-server\\middleware\\auth.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:4,column:2},end:{line:17,column:3}},"2":{start:{line:5,column:18},end:{line:5,column:35}},"3":{start:{line:6,column:4},end:{line:6,column:78}},"4":{start:{line:6,column:16},end:{line:6,column:78}},"5":{start:{line:10,column:21},end:{line:10,column:62}},"6":{start:{line:11,column:4},end:{line:11,column:29}},"7":{start:{line:13,column:4},end:{line:13,column:11}},"8":{start:{line:15,column:4},end:{line:15,column:23}},"9":{start:{line:16,column:4},end:{line:16,column:59}},"10":{start:{line:20,column:0},end:{line:20,column:22}}},fnMap:{"0":{name:"auth",decl:{start:{line:3,column:9},end:{line:3,column:13}},loc:{start:{line:3,column:30},end:{line:18,column:1}},line:3}},branchMap:{"0":{loc:{start:{line:6,column:4},end:{line:6,column:78}},type:"if",locations:[{start:{line:6,column:4},end:{line:6,column:78}},{start:{line:6,column:4},end:{line:6,column:78}}],line:6}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1364efccd46646f718adc12484760c9abf969a44"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2e3fehcp8e=function(){return actualCoverage;};}return actualCoverage;}cov_2e3fehcp8e();const jwt=(cov_2e3fehcp8e().s[0]++,require("jsonwebtoken"));function auth(req,res,next){cov_2e3fehcp8e().f[0]++;cov_2e3fehcp8e().s[1]++;try{const token=(cov_2e3fehcp8e().s[2]++,req.cookies.token);cov_2e3fehcp8e().s[3]++;if(!token){cov_2e3fehcp8e().b[0][0]++;cov_2e3fehcp8e().s[4]++;return res.status(401).json({errorMessage:"Unauthorized"});}else{cov_2e3fehcp8e().b[0][1]++;}// Check to see if the token has been created with JWT_SECRET
// If it has, it decodes the token
const verified=(cov_2e3fehcp8e().s[5]++,jwt.verify(token,process.env.JWT_SECRET));cov_2e3fehcp8e().s[6]++;req.user=verified.user;cov_2e3fehcp8e().s[7]++;next();}catch(err){cov_2e3fehcp8e().s[8]++;console.error(err);cov_2e3fehcp8e().s[9]++;res.status(401).json({errorMessage:"Unauthorized"});}}cov_2e3fehcp8e().s[10]++;module.exports=auth;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiand0IiwicmVxdWlyZSIsImF1dGgiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJjb29raWVzIiwic3RhdHVzIiwianNvbiIsImVycm9yTWVzc2FnZSIsInZlcmlmaWVkIiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJ1c2VyIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IjhtREFlWTsyRkFmWixLQUFNQSxDQUFBQSxHQUFHLDBCQUFHQyxPQUFPLENBQUMsY0FBRCxDQUFWLENBQVQsQ0FFQSxRQUFTQyxDQUFBQSxJQUFULENBQWNDLEdBQWQsQ0FBbUJDLEdBQW5CLENBQXdCQyxJQUF4QixDQUE4QixpREFDNUIsR0FBSSxDQUNGLEtBQU1DLENBQUFBLEtBQUssMEJBQUdILEdBQUcsQ0FBQ0ksT0FBSixDQUFZRCxLQUFmLENBQVgsQ0FERSx3QkFFRixHQUFJLENBQUNBLEtBQUwsQ0FBWSwwREFBT0YsQ0FBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FBRUMsWUFBWSxDQUFFLGNBQWhCLENBQXJCLENBQVAsQ0FBOEQsQ0FBMUUsaUNBRUE7QUFDQTtBQUNBLEtBQU1DLENBQUFBLFFBQVEsMEJBQUdYLEdBQUcsQ0FBQ1ksTUFBSixDQUFXTixLQUFYLENBQWtCTyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsQ0FBSCxDQUFkLENBTkUsd0JBT0ZaLEdBQUcsQ0FBQ2EsSUFBSixDQUFXTCxRQUFRLENBQUNLLElBQXBCLENBUEUsd0JBU0ZYLElBQUksR0FDTCxDQUFDLE1BQU9ZLEdBQVAsQ0FBWSx5QkFDWkMsT0FBTyxDQUFDQyxLQUFSLENBQWNGLEdBQWQsRUFEWSx3QkFFWmIsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FBRUMsWUFBWSxDQUFFLGNBQWhCLENBQXJCLEVBQ0QsQ0FDRixDLHlCQUVEVSxNQUFNLENBQUNDLE9BQVAsQ0FBaUJuQixJQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGp3dCA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7XHJcblxyXG5mdW5jdGlvbiBhdXRoKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMudG9rZW47XHJcbiAgICBpZiAoIXRva2VuKSByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvck1lc3NhZ2U6IFwiVW5hdXRob3JpemVkXCIgfSk7XHJcblxyXG4gICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSB0b2tlbiBoYXMgYmVlbiBjcmVhdGVkIHdpdGggSldUX1NFQ1JFVFxyXG4gICAgLy8gSWYgaXQgaGFzLCBpdCBkZWNvZGVzIHRoZSB0b2tlblxyXG4gICAgY29uc3QgdmVyaWZpZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcclxuICAgIHJlcS51c2VyID0gdmVyaWZpZWQudXNlcjtcclxuXHJcbiAgICBuZXh0KCk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yTWVzc2FnZTogXCJVbmF1dGhvcml6ZWRcIiB9KTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYXV0aDtcclxuIl19