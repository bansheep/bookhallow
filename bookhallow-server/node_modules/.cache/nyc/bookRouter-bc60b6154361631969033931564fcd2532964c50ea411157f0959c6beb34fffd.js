function cov_26kdl65813(){var path="C:\\Users\\Owner\\Desktop\\bookhallow\\bookhallow-server\\routers\\bookRouter.js";var hash="212271f0a13ec1da0e67d20129a3fdd0be2ef44c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Owner\\Desktop\\bookhallow\\bookhallow-server\\routers\\bookRouter.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:42}},"1":{start:{line:2,column:13},end:{line:2,column:38}},"2":{start:{line:3,column:13},end:{line:3,column:42}},"3":{start:{line:48,column:16},end:{line:48,column:29}},"4":{start:{line:49,column:4},end:{line:53,column:7}},"5":{start:{line:50,column:8},end:{line:50,column:30}},"6":{start:{line:50,column:16},end:{line:50,column:30}},"7":{start:{line:52,column:8},end:{line:52,column:24}},"8":{start:{line:61,column:18},end:{line:61,column:36}},"9":{start:{line:63,column:4},end:{line:70,column:7}},"10":{start:{line:64,column:8},end:{line:69,column:9}},"11":{start:{line:65,column:12},end:{line:65,column:26}},"12":{start:{line:68,column:12},end:{line:68,column:67}},"13":{start:{line:77,column:4},end:{line:81,column:7}},"14":{start:{line:78,column:8},end:{line:78,column:30}},"15":{start:{line:78,column:16},end:{line:78,column:30}},"16":{start:{line:80,column:8},end:{line:80,column:23}},"17":{start:{line:88,column:4},end:{line:90,column:7}},"18":{start:{line:89,column:8},end:{line:89,column:68}},"19":{start:{line:97,column:4},end:{line:103,column:7}},"20":{start:{line:98,column:8},end:{line:98,column:30}},"21":{start:{line:98,column:16},end:{line:98,column:30}},"22":{start:{line:99,column:8},end:{line:102,column:11}},"23":{start:{line:100,column:12},end:{line:100,column:34}},"24":{start:{line:100,column:20},end:{line:100,column:34}},"25":{start:{line:101,column:12},end:{line:101,column:57}},"26":{start:{line:107,column:0},end:{line:107,column:80}}},fnMap:{"0":{name:"getBooks",decl:{start:{line:46,column:9},end:{line:46,column:17}},loc:{start:{line:46,column:28},end:{line:54,column:1}},line:46},"1":{name:"(anonymous_1)",decl:{start:{line:49,column:15},end:{line:49,column:16}},loc:{start:{line:49,column:31},end:{line:53,column:5}},line:49},"2":{name:"postBook",decl:{start:{line:59,column:9},end:{line:59,column:17}},loc:{start:{line:59,column:28},end:{line:71,column:1}},line:59},"3":{name:"(anonymous_3)",decl:{start:{line:63,column:17},end:{line:63,column:18}},loc:{start:{line:63,column:31},end:{line:70,column:5}},line:63},"4":{name:"getBook",decl:{start:{line:76,column:9},end:{line:76,column:16}},loc:{start:{line:76,column:27},end:{line:82,column:1}},line:76},"5":{name:"(anonymous_5)",decl:{start:{line:77,column:33},end:{line:77,column:34}},loc:{start:{line:77,column:48},end:{line:81,column:5}},line:77},"6":{name:"deleteBook",decl:{start:{line:87,column:9},end:{line:87,column:19}},loc:{start:{line:87,column:30},end:{line:91,column:1}},line:87},"7":{name:"(anonymous_7)",decl:{start:{line:88,column:42},end:{line:88,column:43}},loc:{start:{line:88,column:59},end:{line:90,column:5}},line:88},"8":{name:"updateBook",decl:{start:{line:96,column:9},end:{line:96,column:19}},loc:{start:{line:96,column:30},end:{line:104,column:1}},line:96},"9":{name:"(anonymous_9)",decl:{start:{line:97,column:40},end:{line:97,column:41}},loc:{start:{line:97,column:55},end:{line:103,column:5}},line:97},"10":{name:"(anonymous_10)",decl:{start:{line:99,column:43},end:{line:99,column:44}},loc:{start:{line:99,column:58},end:{line:102,column:9}},line:99}},branchMap:{"0":{loc:{start:{line:50,column:8},end:{line:50,column:30}},type:"if",locations:[{start:{line:50,column:8},end:{line:50,column:30}},{start:{line:50,column:8},end:{line:50,column:30}}],line:50},"1":{loc:{start:{line:64,column:8},end:{line:69,column:9}},type:"if",locations:[{start:{line:64,column:8},end:{line:69,column:9}},{start:{line:64,column:8},end:{line:69,column:9}}],line:64},"2":{loc:{start:{line:78,column:8},end:{line:78,column:30}},type:"if",locations:[{start:{line:78,column:8},end:{line:78,column:30}},{start:{line:78,column:8},end:{line:78,column:30}}],line:78},"3":{loc:{start:{line:98,column:8},end:{line:98,column:30}},type:"if",locations:[{start:{line:98,column:8},end:{line:98,column:30}},{start:{line:98,column:8},end:{line:98,column:30}}],line:98},"4":{loc:{start:{line:100,column:12},end:{line:100,column:34}},type:"if",locations:[{start:{line:100,column:12},end:{line:100,column:34}},{start:{line:100,column:12},end:{line:100,column:34}}],line:100}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"212271f0a13ec1da0e67d20129a3fdd0be2ef44c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_26kdl65813=function(){return actualCoverage;};}return actualCoverage;}cov_26kdl65813();const router=(cov_26kdl65813().s[0]++,require("express").Router());const Book=(cov_26kdl65813().s[1]++,require("../models/Book"));const auth=(cov_26kdl65813().s[2]++,require("../middleware/auth"));// router.post("/", auth, async (req, res) => {
//   try{
//     // Since auth has succeeded, the user id is available to use
//     const {title} = req.body;
//
//     const newBook = new Book({
//       title: title
//     });
//
//     const savedBook =  newBook.save()
//                   .then()
//                   .catch(err => {
//                    res.status(500).json({
//                       errors: [{ error: err }]
//                     })
//                    });
//
//     res.json(savedBook);
//
//   }
//   catch(err){
//     console.error(err);
//     res.status(500).send();
//   }
// });
//
// router.get("/", auth, async (req, res)=>{
//   try{
//     const books = await Book.find();
//     res.json(books);
//   }
//   catch(err){
//     console.error(err);
//     res.status(500).send();
//   }
// });
/*
 * GET /book route to retrieve all the books.
 */function getBooks(req,res){cov_26kdl65813().f[0]++;//Query the DB and if no errors, send all the books
let query=(cov_26kdl65813().s[3]++,Book.find({}));cov_26kdl65813().s[4]++;query.exec((err,books)=>{cov_26kdl65813().f[1]++;cov_26kdl65813().s[5]++;if(err){cov_26kdl65813().b[0][0]++;cov_26kdl65813().s[6]++;res.send(err);}else{cov_26kdl65813().b[0][1]++;}//If no errors, send them back to the client
cov_26kdl65813().s[7]++;res.json(books);});}/*
 * POST /book to save a new book.
 */function postBook(req,res){cov_26kdl65813().f[2]++;//Creates a new book
var newBook=(cov_26kdl65813().s[8]++,new Book(req.body));//Save it into the DB.
cov_26kdl65813().s[9]++;newBook.save((err,book)=>{cov_26kdl65813().f[3]++;cov_26kdl65813().s[10]++;if(err){cov_26kdl65813().b[1][0]++;cov_26kdl65813().s[11]++;res.send(err);}else{cov_26kdl65813().b[1][1]++;cov_26kdl65813().s[12]++;//If no errors, send it back to the client
res.json({message:"Book successfully added!",book});}});}/*
 * GET /book/:id route to retrieve a book given its id.
 */function getBook(req,res){cov_26kdl65813().f[4]++;cov_26kdl65813().s[13]++;Book.findById(req.params.id,(err,book)=>{cov_26kdl65813().f[5]++;cov_26kdl65813().s[14]++;if(err){cov_26kdl65813().b[2][0]++;cov_26kdl65813().s[15]++;res.send(err);}else{cov_26kdl65813().b[2][1]++;}//If no errors, send it back to the client
cov_26kdl65813().s[16]++;res.json(book);});}/*
 * DELETE /book/:id to delete a book given its id.
 */function deleteBook(req,res){cov_26kdl65813().f[6]++;cov_26kdl65813().s[17]++;Book.deleteOne({_id:req.params.id},(err,result)=>{cov_26kdl65813().f[7]++;cov_26kdl65813().s[18]++;res.json({message:"Book successfully deleted!",result});});}/*
 * PUT /book/:id to updatea a book given its id
 */function updateBook(req,res){cov_26kdl65813().f[8]++;cov_26kdl65813().s[19]++;Book.findById({_id:req.params.id},(err,book)=>{cov_26kdl65813().f[9]++;cov_26kdl65813().s[20]++;if(err){cov_26kdl65813().b[3][0]++;cov_26kdl65813().s[21]++;res.send(err);}else{cov_26kdl65813().b[3][1]++;}cov_26kdl65813().s[22]++;Object.assign(book,req.body).save((err,book)=>{cov_26kdl65813().f[10]++;cov_26kdl65813().s[23]++;if(err){cov_26kdl65813().b[4][0]++;cov_26kdl65813().s[24]++;res.send(err);}else{cov_26kdl65813().b[4][1]++;}cov_26kdl65813().s[25]++;res.json({message:'Book updated!',book});});});}//export all the functions
cov_26kdl65813().s[26]++;module.exports={router,getBooks,postBook,getBook,deleteBook,updateBook};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2tSb3V0ZXIuanMiXSwibmFtZXMiOlsicm91dGVyIiwicmVxdWlyZSIsIlJvdXRlciIsIkJvb2siLCJhdXRoIiwiZ2V0Qm9va3MiLCJyZXEiLCJyZXMiLCJxdWVyeSIsImZpbmQiLCJleGVjIiwiZXJyIiwiYm9va3MiLCJzZW5kIiwianNvbiIsInBvc3RCb29rIiwibmV3Qm9vayIsImJvZHkiLCJzYXZlIiwiYm9vayIsIm1lc3NhZ2UiLCJnZXRCb29rIiwiZmluZEJ5SWQiLCJwYXJhbXMiLCJpZCIsImRlbGV0ZUJvb2siLCJkZWxldGVPbmUiLCJfaWQiLCJyZXN1bHQiLCJ1cGRhdGVCb29rIiwiT2JqZWN0IiwiYXNzaWduIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ims2SkFlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFQLENBQW1CQyxNQUFuQixFQUFILENBQVosQ0FDQSxLQUFNQyxDQUFBQSxJQUFJLDBCQUFHRixPQUFPLENBQUMsZ0JBQUQsQ0FBVixDQUFWLENBQ0EsS0FBTUcsQ0FBQUEsSUFBSSwwQkFBR0gsT0FBTyxDQUFDLG9CQUFELENBQVYsQ0FBVixDQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQSxHQUNBLFFBQVNJLENBQUFBLFFBQVQsQ0FBa0JDLEdBQWxCLENBQXVCQyxHQUF2QixDQUE0Qix5QkFDeEI7QUFDQSxHQUFJQyxDQUFBQSxLQUFLLDBCQUFHTCxJQUFJLENBQUNNLElBQUwsQ0FBVSxFQUFWLENBQUgsQ0FBVCxDQUZ3Qix3QkFHeEJELEtBQUssQ0FBQ0UsSUFBTixDQUFXLENBQUNDLEdBQUQsQ0FBTUMsS0FBTixHQUFnQixpREFDdkIsR0FBR0QsR0FBSCxDQUFRLG9EQUFBSixHQUFHLENBQUNNLElBQUosQ0FBU0YsR0FBVCxFQUFjLENBQXRCLGlDQUNBO0FBRnVCLHdCQUd2QkosR0FBRyxDQUFDTyxJQUFKLENBQVNGLEtBQVQsRUFDSCxDQUpELEVBS0gsQ0FFRDtBQUNBO0FBQ0EsR0FDQSxRQUFTRyxDQUFBQSxRQUFULENBQWtCVCxHQUFsQixDQUF1QkMsR0FBdkIsQ0FBNEIseUJBQ3hCO0FBQ0EsR0FBSVMsQ0FBQUEsT0FBTywwQkFBRyxHQUFJYixDQUFBQSxJQUFKLENBQVNHLEdBQUcsQ0FBQ1csSUFBYixDQUFILENBQVgsQ0FDQTtBQUh3Qix3QkFJeEJELE9BQU8sQ0FBQ0UsSUFBUixDQUFhLENBQUNQLEdBQUQsQ0FBS1EsSUFBTCxHQUFjLGtEQUN2QixHQUFHUixHQUFILENBQVEscURBQ0pKLEdBQUcsQ0FBQ00sSUFBSixDQUFTRixHQUFULEVBQ0gsQ0FGRCxJQUdLLHFEQUFFO0FBQ0hKLEdBQUcsQ0FBQ08sSUFBSixDQUFTLENBQUNNLE9BQU8sQ0FBRSwwQkFBVixDQUFzQ0QsSUFBdEMsQ0FBVCxFQUNILENBQ0osQ0FQRCxFQVFILENBRUQ7QUFDQTtBQUNBLEdBQ0EsUUFBU0UsQ0FBQUEsT0FBVCxDQUFpQmYsR0FBakIsQ0FBc0JDLEdBQXRCLENBQTJCLGtEQUN2QkosSUFBSSxDQUFDbUIsUUFBTCxDQUFjaEIsR0FBRyxDQUFDaUIsTUFBSixDQUFXQyxFQUF6QixDQUE2QixDQUFDYixHQUFELENBQU1RLElBQU4sR0FBZSxrREFDeEMsR0FBR1IsR0FBSCxDQUFRLHFEQUFBSixHQUFHLENBQUNNLElBQUosQ0FBU0YsR0FBVCxFQUFjLENBQXRCLGlDQUNBO0FBRndDLHlCQUd4Q0osR0FBRyxDQUFDTyxJQUFKLENBQVNLLElBQVQsRUFDSCxDQUpELEVBS0gsQ0FFRDtBQUNBO0FBQ0EsR0FDQSxRQUFTTSxDQUFBQSxVQUFULENBQW9CbkIsR0FBcEIsQ0FBeUJDLEdBQXpCLENBQThCLGtEQUMxQkosSUFBSSxDQUFDdUIsU0FBTCxDQUFlLENBQUNDLEdBQUcsQ0FBR3JCLEdBQUcsQ0FBQ2lCLE1BQUosQ0FBV0MsRUFBbEIsQ0FBZixDQUFzQyxDQUFDYixHQUFELENBQU1pQixNQUFOLEdBQWlCLGtEQUNuRHJCLEdBQUcsQ0FBQ08sSUFBSixDQUFTLENBQUVNLE9BQU8sQ0FBRSw0QkFBWCxDQUF5Q1EsTUFBekMsQ0FBVCxFQUNILENBRkQsRUFHSCxDQUVEO0FBQ0E7QUFDQSxHQUNBLFFBQVNDLENBQUFBLFVBQVQsQ0FBb0J2QixHQUFwQixDQUF5QkMsR0FBekIsQ0FBOEIsa0RBQzFCSixJQUFJLENBQUNtQixRQUFMLENBQWMsQ0FBQ0ssR0FBRyxDQUFFckIsR0FBRyxDQUFDaUIsTUFBSixDQUFXQyxFQUFqQixDQUFkLENBQW9DLENBQUNiLEdBQUQsQ0FBTVEsSUFBTixHQUFlLGtEQUMvQyxHQUFHUixHQUFILENBQVEscURBQUFKLEdBQUcsQ0FBQ00sSUFBSixDQUFTRixHQUFULEVBQWMsQ0FBdEIsaUNBRCtDLHlCQUUvQ21CLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjWixJQUFkLENBQW9CYixHQUFHLENBQUNXLElBQXhCLEVBQThCQyxJQUE5QixDQUFtQyxDQUFDUCxHQUFELENBQU1RLElBQU4sR0FBZSxtREFDOUMsR0FBR1IsR0FBSCxDQUFRLHFEQUFBSixHQUFHLENBQUNNLElBQUosQ0FBU0YsR0FBVCxFQUFjLENBQXRCLGlDQUQ4Qyx5QkFFOUNKLEdBQUcsQ0FBQ08sSUFBSixDQUFTLENBQUVNLE9BQU8sQ0FBRSxlQUFYLENBQTRCRCxJQUE1QixDQUFULEVBQ0gsQ0FIRCxFQUlILENBTkQsRUFPSCxDQUVEO3lCQUNBYSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FBQ2pDLE1BQUQsQ0FBU0ssUUFBVCxDQUFtQlUsUUFBbkIsQ0FBNkJNLE9BQTdCLENBQXNDSSxVQUF0QyxDQUFrREksVUFBbEQsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByb3V0ZXIgPSByZXF1aXJlKFwiZXhwcmVzc1wiKS5Sb3V0ZXIoKTtcclxuY29uc3QgQm9vayA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvQm9va1wiKTtcclxuY29uc3QgYXV0aCA9IHJlcXVpcmUoXCIuLi9taWRkbGV3YXJlL2F1dGhcIik7XHJcblxyXG4vLyByb3V0ZXIucG9zdChcIi9cIiwgYXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgdHJ5e1xyXG4vLyAgICAgLy8gU2luY2UgYXV0aCBoYXMgc3VjY2VlZGVkLCB0aGUgdXNlciBpZCBpcyBhdmFpbGFibGUgdG8gdXNlXHJcbi8vICAgICBjb25zdCB7dGl0bGV9ID0gcmVxLmJvZHk7XHJcbi8vXHJcbi8vICAgICBjb25zdCBuZXdCb29rID0gbmV3IEJvb2soe1xyXG4vLyAgICAgICB0aXRsZTogdGl0bGVcclxuLy8gICAgIH0pO1xyXG4vL1xyXG4vLyAgICAgY29uc3Qgc2F2ZWRCb29rID0gIG5ld0Jvb2suc2F2ZSgpXHJcbi8vICAgICAgICAgICAgICAgICAgIC50aGVuKClcclxuLy8gICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbi8vICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IFt7IGVycm9yOiBlcnIgfV1cclxuLy8gICAgICAgICAgICAgICAgICAgICB9KVxyXG4vLyAgICAgICAgICAgICAgICAgICAgfSk7XHJcbi8vXHJcbi8vICAgICByZXMuanNvbihzYXZlZEJvb2spO1xyXG4vL1xyXG4vLyAgIH1cclxuLy8gICBjYXRjaChlcnIpe1xyXG4vLyAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4vLyAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoKTtcclxuLy8gICB9XHJcbi8vIH0pO1xyXG4vL1xyXG4vLyByb3V0ZXIuZ2V0KFwiL1wiLCBhdXRoLCBhc3luYyAocmVxLCByZXMpPT57XHJcbi8vICAgdHJ5e1xyXG4vLyAgICAgY29uc3QgYm9va3MgPSBhd2FpdCBCb29rLmZpbmQoKTtcclxuLy8gICAgIHJlcy5qc29uKGJvb2tzKTtcclxuLy8gICB9XHJcbi8vICAgY2F0Y2goZXJyKXtcclxuLy8gICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKCk7XHJcbi8vICAgfVxyXG4vLyB9KTtcclxuXHJcblxyXG4vKlxyXG4gKiBHRVQgL2Jvb2sgcm91dGUgdG8gcmV0cmlldmUgYWxsIHRoZSBib29rcy5cclxuICovXHJcbmZ1bmN0aW9uIGdldEJvb2tzKHJlcSwgcmVzKSB7XHJcbiAgICAvL1F1ZXJ5IHRoZSBEQiBhbmQgaWYgbm8gZXJyb3JzLCBzZW5kIGFsbCB0aGUgYm9va3NcclxuICAgIGxldCBxdWVyeSA9IEJvb2suZmluZCh7fSk7XHJcbiAgICBxdWVyeS5leGVjKChlcnIsIGJvb2tzKSA9PiB7XHJcbiAgICAgICAgaWYoZXJyKSByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgIC8vSWYgbm8gZXJyb3JzLCBzZW5kIHRoZW0gYmFjayB0byB0aGUgY2xpZW50XHJcbiAgICAgICAgcmVzLmpzb24oYm9va3MpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbiAqIFBPU1QgL2Jvb2sgdG8gc2F2ZSBhIG5ldyBib29rLlxyXG4gKi9cclxuZnVuY3Rpb24gcG9zdEJvb2socmVxLCByZXMpIHtcclxuICAgIC8vQ3JlYXRlcyBhIG5ldyBib29rXHJcbiAgICB2YXIgbmV3Qm9vayA9IG5ldyBCb29rKHJlcS5ib2R5KTtcclxuICAgIC8vU2F2ZSBpdCBpbnRvIHRoZSBEQi5cclxuICAgIG5ld0Jvb2suc2F2ZSgoZXJyLGJvb2spID0+IHtcclxuICAgICAgICBpZihlcnIpIHtcclxuICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7IC8vSWYgbm8gZXJyb3JzLCBzZW5kIGl0IGJhY2sgdG8gdGhlIGNsaWVudFxyXG4gICAgICAgICAgICByZXMuanNvbih7bWVzc2FnZTogXCJCb29rIHN1Y2Nlc3NmdWxseSBhZGRlZCFcIiwgYm9vayB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuICogR0VUIC9ib29rLzppZCByb3V0ZSB0byByZXRyaWV2ZSBhIGJvb2sgZ2l2ZW4gaXRzIGlkLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0Qm9vayhyZXEsIHJlcykge1xyXG4gICAgQm9vay5maW5kQnlJZChyZXEucGFyYW1zLmlkLCAoZXJyLCBib29rKSA9PiB7XHJcbiAgICAgICAgaWYoZXJyKSByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgIC8vSWYgbm8gZXJyb3JzLCBzZW5kIGl0IGJhY2sgdG8gdGhlIGNsaWVudFxyXG4gICAgICAgIHJlcy5qc29uKGJvb2spO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbiAqIERFTEVURSAvYm9vay86aWQgdG8gZGVsZXRlIGEgYm9vayBnaXZlbiBpdHMgaWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWxldGVCb29rKHJlcSwgcmVzKSB7XHJcbiAgICBCb29rLmRlbGV0ZU9uZSh7X2lkIDogcmVxLnBhcmFtcy5pZH0sIChlcnIsIHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogXCJCb29rIHN1Y2Nlc3NmdWxseSBkZWxldGVkIVwiLCByZXN1bHQgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuICogUFVUIC9ib29rLzppZCB0byB1cGRhdGVhIGEgYm9vayBnaXZlbiBpdHMgaWRcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUJvb2socmVxLCByZXMpIHtcclxuICAgIEJvb2suZmluZEJ5SWQoe19pZDogcmVxLnBhcmFtcy5pZH0sIChlcnIsIGJvb2spID0+IHtcclxuICAgICAgICBpZihlcnIpIHJlcy5zZW5kKGVycik7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbihib29rLCByZXEuYm9keSkuc2F2ZSgoZXJyLCBib29rKSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGVycikgcmVzLnNlbmQoZXJyKTtcclxuICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnQm9vayB1cGRhdGVkIScsIGJvb2sgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy9leHBvcnQgYWxsIHRoZSBmdW5jdGlvbnNcclxubW9kdWxlLmV4cG9ydHMgPSB7cm91dGVyLCBnZXRCb29rcywgcG9zdEJvb2ssIGdldEJvb2ssIGRlbGV0ZUJvb2ssIHVwZGF0ZUJvb2sgfTtcclxuIl19